(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{29:function(t,e,a){},31:function(t,e,a){},72:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(23),c=a.n(r),s=(a(29),a(3)),o=a.n(s),i=a(14),u=a(5),l=a(6),p=a(7),h=a(9),d=a(8),g=(a(31),a(32),a(24)),f=a.n(g),m=a(12),b=a.n(m);function j(t,e){var a="".concat("https://pixabay.com/api/","?key=").concat("23036221-d804a8a78d7b0866edf7d8fc3","&q=").concat(t,"&page=").concat(e,"&image_type=photo&orientation=horizontal&per_page=12");return b.a.get(a).then((function(t){return t})).then((function(t){return t.data.hits})).catch((function(t){console.log(t)}))}var O=a(0),v=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={query:"",page:1},t.handleSearch=function(){var e=Object(u.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),1,e.next=4,t.props.annulePage(1);case 4:return e.next=6,j(t.state.query,t.state.page).then((function(t){n=t}));case 6:t.props.addImages(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleChange=function(e){t.setState({query:e.target.value})},t}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(){var t=Object(u.a)(o.a.mark((function t(){var e,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.page==this.props.page){t.next=10;break}return t.next=3,this.setState({page:this.props.page});case 3:return e=!0,this.props.isLoading(e),t.next=7,j(this.state.query,this.state.page).then((function(t){a=t}));case 7:e=!1,this.props.isLoading(e),this.props.loadMore(a);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsx)("header",{className:"Searchbar",children:Object(O.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSearch,children:[Object(O.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(O.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(O.jsx)("input",{className:"SearchForm-input",name:"searchQuery",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange})]})})}}]),a}(n.Component);function y(t){return t.hits.data.map((function(t,e){return Object(O.jsx)("li",{className:"ImageGalleryItem",children:Object(O.jsx)("img",{id:t.id,src:t.webformatURL,alt:"image found",className:"ImageGalleryItem-image"})},e)}))}function x(t){return Object(O.jsx)("ul",{className:"ImageGallery",children:Object(O.jsx)(y,{hits:t})})}var w=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={page:1},t.incrementPage=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({page:t.state.page+1});case 2:t.props.pageCount(t.state.page);case 3:case"end":return e.stop()}}),e)}))),t}return Object(p.a)(a,[{key:"componentWillUpdate",value:function(){this.state.page!==this.props.page&&this.setState({page:this.props.page})}},{key:"render",value:function(){return Object(O.jsx)("button",{type:"button",className:"Button",onClick:this.incrementPage,children:"Load More"})}}]),a}(n.Component),S=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).closeModal=function(){t.props.closeModalOverlay(!1)},t}return Object(p.a)(a,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"Overlay",onClick:this.closeModal,children:Object(O.jsx)("div",{className:"Modal",children:Object(O.jsx)("img",{src:this.props.imgUrl,alt:"Big image"})})})}}]),a}(n.Component);function k(t){var e="".concat("https://pixabay.com/api/","?key=").concat("23036221-d804a8a78d7b0866edf7d8fc3","&id=").concat(t);return b.a.get(e).then((function(t){return t})).then((function(t){return t.data.hits[0].largeImageURL})).catch((function(t){console.log(t)}))}var I=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={data:[],page:1,query:"",isLoading:!1,modalIsOpen:!1,bigImgUrl:""},t.addImages=function(e){t.setState((function(){return{data:e}}))},t.loadMore=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState((function(t){return{data:[].concat(Object(i.a)(t.data),Object(i.a)(a))}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.annulePage=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({page:a});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.pageCount=function(e){t.setState((function(){return{page:e}}))},t.isLoading=function(e){t.setState({isLoading:e})},t.openModal=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({modalIsOpen:!0});case 2:return e.next=4,k(a.target.id).then((function(e){t.setState({bigImgUrl:e})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.closeModal=function(e){!1!==t.state.modalIsOpen&&27===e.keyCode&&t.setState({modalIsOpen:!1,bigImgUrl:""})},t.closeModalOverlay=function(e){t.setState({modalIsOpen:e,bigImgUrl:""})},t}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({isLoading:!0}),t.next=3,j(this.state.query,this.state.page).then((function(t){e=t}));case 3:this.setState({data:e,isLoading:!1}),document.addEventListener("keydown",this.closeModal),document.querySelector(".ImageGallery").addEventListener("click",this.openModal);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)(O.Fragment,{children:[this.state.modalIsOpen?Object(O.jsx)(S,{imgUrl:this.state.bigImgUrl,closeModalOverlay:this.closeModalOverlay}):null,Object(O.jsx)(v,{addImages:this.addImages,loadMore:this.loadMore,page:this.state.page,annulePage:this.annulePage,isLoading:this.isLoading}),this.state.isLoading?Object(O.jsx)(f.a,{className:"loader",type:"ThreeDots",width:"500px",color:"#00BFFF",style:{position:"fixed",top:"50%",left:"35%"}}):null,Object(O.jsx)(x,{data:this.state.data}),Object(O.jsx)(w,{pageCount:this.pageCount,page:this.state.page})]})}}]),a}(n.Component),M=I;c.a.render(Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(M,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.ea6a01c3.chunk.js.map